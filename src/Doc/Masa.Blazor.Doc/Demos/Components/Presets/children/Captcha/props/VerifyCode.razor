@using System.Text
<PImageCaptcha CaptchaCode="@captchaCode" CaptchaWidth="200" Label="VerifyCode" ErrorMessage="@ErrorMessage" VerifyCode="@verifyCode" Refresh="RefreshCode"></PImageCaptcha>

@code{
    string captchaCode = "";

    string randomCode = "123456789";

    string calcFunCode = "+-*";

    string verifyCode = "";

    string ErrorMessage = "Verify code error";

    Random random = new Random();

    protected override Task OnInitializedAsync()
    {
        RefreshCode();
        return base.OnInitializedAsync();
    }

    private Task RefreshCode()
    {
       var firstNumber = randomCode[random.Next(0, randomCode.Length)].ToString();

        var secondNumber = randomCode[random.Next(0, randomCode.Length)].ToString();

        var calcFun = calcFunCode[random.Next(0, calcFunCode.Length)].ToString();

        switch(calcFun)
        {
            case "+":
                verifyCode = (int.Parse(firstNumber) + int.Parse(secondNumber)).ToString();
                break;
            case "-":
                verifyCode = (int.Parse(firstNumber) - int.Parse(secondNumber)).ToString();
                break;
            case "*":
                verifyCode = (int.Parse(firstNumber) * int.Parse(secondNumber)).ToString();
                break;
        }

        captchaCode = firstNumber + calcFun + secondNumber;

        return Task.CompletedTask;
    }
}