<MUploadImage @ref="UploadRef" @bind-Value="ImageUrls" OnInputFileUpload="FileUploadCallBack.CreateCallback(Upload)" />
<br />
<MButton Color="primary" OnClick="async () => await UploadRef.Upload()">上传</MButton>
<div class="mt-12">
    @foreach(var imageUrl in ImageUrls)
    {
        <img src="@imageUrl" height=100 width=100 />
    }
</div>
@code {
    public List<string> ImageUrls { get; set; } = new();

    public MUploadImage UploadRef { get; set; }

    public async Task<List<string>> Upload(IReadOnlyList<IBrowserFile> files)
    {
        var imageUrls = new List<string>();
        foreach (var file in files)
        {
            var buffers = new byte[file.Size];
            await file.OpenReadStream().ReadAsync(buffers);
            imageUrls.Add($"data:{file.ContentType};base64,{Convert.ToBase64String(buffers)}");
        }

        return imageUrls;
    }
}